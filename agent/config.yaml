# ============================================================
# SE HANDWERK - Akquise-Agent Konfiguration
# ============================================================

firma:
  name: "SE Handwerk"
  region_schwerpunkt: "Heilbronn"

# ----------------------------------------------------------
# SUCHGEBIET: Nur 70 km um Heilbronn (zuverlässiges Filtering)
# ----------------------------------------------------------
suchgebiet:
  aktiv: true
  zentrum: "Heilbronn"
  radius_km: 70
  max_alter_stunden: 5
  zentrum_koordinaten: [49.1427, 9.2109]

# ----------------------------------------------------------
# GEODISTANZ-FILTERING: Nominatim API (OpenStreetMap)
# ----------------------------------------------------------
nominatim:
  enabled: true
  base_url: "https://nominatim.openstreetmap.org"
  user_agent: "se_handwerk_agent"
  cache_tage: 30

# ----------------------------------------------------------
# REGIONEN mit Scoring-Gewichtung
# ----------------------------------------------------------
regionen:
  heilbronn:
    score: 30
    plz_prefixes: ["740", "741", "743", "742"]
    keywords: ["Heilbronn", "Neckarsulm", "Weinsberg", "Bad Friedrichshall", "Lauffen", "Brackenheim", "Öhringen", "Neuenstadt", "Bad Rappenau", "Eppingen", "Bad Wimpfen", "Obersulm"]
  umkreis_100km:
    score: 20
    plz_prefixes: ["70", "71", "69", "68", "75"]
    keywords: ["Stuttgart", "Ludwigsburg", "Heidelberg", "Mannheim", "Schwäbisch Hall", "Pforzheim", "Esslingen", "Karlsruhe", "Mosbach", "Sinsheim", "Bretten", "Backnang", "Waiblingen"]
  umkreis_rand:
    score: 10
    plz_prefixes: ["73", "72"]
    keywords: ["Göppingen", "Schwäbisch Gmünd", "Aalen", "Würzburg", "Kirchheim"]

# ----------------------------------------------------------
# SUCHBEGRIFFE pro Kategorie
# ----------------------------------------------------------
suchbegriffe:
  boden:
    - "Laminat verlegen"
    - "Vinyl verlegen"
    - "Klickvinyl"
    - "Vinylboden verlegen"
    - "Boden erneuern"
    - "Bodenleger gesucht"
    - "Wohnung renovieren Boden"
    - "Laminat legen"
    - "Bodenbelag verlegen"
    - "Sockelleisten montieren"
    - "Trittschalldämmung"
    - "alten Boden entfernen"
    - "Teppich entfernen"
  montage:
    - "Möbel montieren"
    - "Möbelaufbau"
    - "IKEA Aufbau"
    - "IKEA Montage"
    - "Schrank aufbauen"
    - "Küche aufbauen"
    - "Möbelmontage"
    - "Homegym aufbauen"
    - "Fitnessgerät montieren"
    - "Power Rack aufbauen"
    - "Squat Rack montieren"
    - "Sportgerät Montage"
    - "Rack montieren"
  uebergabe:
    - "Wohnungsübergabe"
    - "Auszugsrenovierung"
    - "Wohnung renovieren Auszug"
    - "Renovierung vor Auszug"
    - "Übergaberenovierung"
    - "Wohnung streichen Übergabe"
    - "Kleinreparaturen Wohnung"
    - "Wohnung instand setzen"
    - "Vermieter Renovierung"
    - "Mietwohnung renovieren"

# ----------------------------------------------------------
# AUSSCHLUSSKRITERIEN
# ----------------------------------------------------------
ausschluesse:
  leistungen:
    - "Fliesen legen"
    - "Fliesen verlegen"
    - "Fliesenleger"
    - "Estrich"
    - "Trockenbau"
    - "Dacharbeiten"
    - "Dachdecker"
    - "Elektroinstallation"
    - "Elektriker"
    - "Sanitär"
    - "Klempner"
    - "Heizung"
    - "Gartenbau"
    - "Landschaftsbau"
    - "Fenster einbauen"
    - "Rohbau"
  begriffe_billig:
    - "günstigster"
    - "billigster"
    - "unter 5 euro"
    - "kostenlos"
    - "umsonst"
    - "geschenkt"

# ----------------------------------------------------------
# SCORING
# ----------------------------------------------------------
scoring:
  gruen_min: 70
  gelb_min: 40
  rot_max: 39
  gewichtung:
    region: 30
    leistung: 40
    qualitaet: 30

# ----------------------------------------------------------
# SCRAPER-EINSTELLUNGEN
# ----------------------------------------------------------
scraper:
  intervall_minuten: 30
  max_ergebnisse_pro_suche: 20
  request_delay_sekunden: [2, 5]
  max_retries: 3
  timeout_sekunden: 30

kleinanzeigen:
  enabled: true
  basis_url: "https://www.kleinanzeigen.de"
  radius_km: 100

myhammer:
  enabled: false
  basis_url: "https://www.myhammer.de"

google:
  enabled: true
  max_results: 10
  site_filter:
    - "nebenan.de"
    - "kleinanzeigen.de"
    - "myhammer.de"

facebook:
  enabled: false
  gruppen_urls: []

# ----------------------------------------------------------
# NEUE KANÄLE: nebenan.de + markt.de
# ----------------------------------------------------------
nebenan:
  enabled: false
  basis_url: "https://www.nebenan.de"
  max_ergebnisse: 20

markt:
  enabled: false
  basis_url: "https://www.markt.de"
  radius_km: 100
  max_ergebnisse: 20

# ----------------------------------------------------------
# KI-AGENTEN (Ollama - Lokale GLM-4)
# ----------------------------------------------------------
ki:
  enabled: true
  # Ollama Konfiguration
  ollama_host: "http://localhost:11434"
  ollama_auto_pull: true

  # Modelle (GLM-5 via Ollama Cloud)
  modell: "glm-5"                         # Standard für Suche & Outreach
  strategie_modell: "glm-5"               # GLM-5 für Strategie (selbes Modell)

  # Alternativen (auskommentiert)
  # modell: "glm-4:9b"                   # Kleinere Version für mehr Speed
  # strategie_modell: "glm-4:9b"         # oder andere Größen

  fallback_auf_regeln: true              # Bei Fehler regelbasiert weiter
  kosten_limit_tag_euro: 0.0             # Nicht relevant bei lokalen Modellen

  strategie:
    intervall: "taeglich"                # Wie oft Strategie analysiert wird
    auto_anwenden: false                 # Vorschläge erst via Telegram bestätigen

  bewertung:
    batch_groesse: 5                     # Listings pro API-Call
    max_tokens: 500

  outreach:
    max_tokens: 800
    stil_pro_plattform: true             # Nachricht an Plattform anpassen
    follow_up_nach_tagen: 3

  kanal_agent:
    intervall: "woechentlich"            # Wie oft neue Plattformen gesucht werden
    max_neue_pro_woche: 3                # Max. neue Plattformen pro Woche
    auto_testen: true                    # Automatisch Such-Seiten testen + Selektoren generieren
    genehmigung_erforderlich: true       # Nutzer muss neue Plattform genehmigen

# ----------------------------------------------------------
# TELEGRAM & DATENBANK
# ----------------------------------------------------------
telegram:
  tages_zusammenfassung_uhrzeit: "20:00"
  max_nachrichten_pro_stunde: 10
  interaktiv: true                       # Bidirektionaler Bot mit Inline-Keyboards
  entscheidung_timeout_stunden: 48       # Offene Entscheidungen nach X Stunden ablaufen lassen

datenbank:
  pfad: "se_handwerk.db"
  cleanup_tage: 30

# ----------------------------------------------------------
# LERN-AGENT: Feedback-Loop & Auto-Optimierung
# ----------------------------------------------------------
lernen:
  metriken_aggregation: "nach_durchlauf" # Wann Metriken aggregiert werden
  auto_deaktivierung_tage: 14           # Suchbegriffe/Plattformen ohne Erfolg nach X Tagen vorschlagen
  min_erfolgsrate_plattform: 0.05       # Plattformen unter 5% Erfolgsrate zur Deaktivierung vorschlagen
